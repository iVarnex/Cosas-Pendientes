<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cosas Pendientes</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #050810;
    --surface: #0b1120;
    --surface2: #111827;
    --border: #1e2d4a;
    --accent1: #38bdf8;
    --accent2: #818cf8;
    --accent3: #34d399;
    --text: #c8d8f0;
    --muted: #4a6080;
    --done: #1e3a5f;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    min-height: 100vh;
    padding: 2rem 1rem 4rem;
    background-image:
      radial-gradient(ellipse 60% 40% at 10% 0%, #0c1e3a 0%, transparent 60%),
      radial-gradient(ellipse 40% 30% at 90% 100%, #0e1a38 0%, transparent 60%);
  }

  .container { max-width: 680px; margin: 0 auto; }

  header {
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
    position: relative;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    gap: 1rem;
  }

  header::after {
    content: '';
    position: absolute;
    bottom: -1px; left: 0;
    width: 80px; height: 2px;
    background: linear-gradient(90deg, var(--accent1), var(--accent2));
  }

  .header-left h1 {
    font-size: 2.4rem;
    font-weight: 800;
    letter-spacing: -1px;
    background: linear-gradient(135deg, var(--accent1) 0%, var(--accent2) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .subtitle {
    font-family: 'Space Mono', monospace;
    font-size: 0.72rem;
    color: var(--muted);
    margin-top: 0.3rem;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .clear-btn {
    background: transparent;
    border: 1px solid #3a1a1a;
    color: #f87171;
    font-size: 0.72rem;
    padding: 0.4rem 0.9rem;
    border-radius: 6px;
    cursor: pointer;
    font-family: 'Space Mono', monospace;
    letter-spacing: 1px;
    white-space: nowrap;
    flex-shrink: 0;
    transition: background 0.2s, border-color 0.2s;
  }
  .clear-btn:hover { background: #1a0808; border-color: #f87171; transform: none; opacity: 1; }

  .section-label {
    font-family: 'Space Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }
  .section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

  .tasks { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 2.5rem; }

  .task {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem 1.2rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
    animation: slideIn 0.4s ease both;
  }

  .task::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    background: var(--color, var(--accent1));
    opacity: 0.7;
    transition: opacity 0.2s;
  }

  .task:hover { border-color: var(--color, var(--accent1)); background: var(--surface2); transform: translateX(2px); }
  .task.done { opacity: 0.45; background: var(--done); }
  .task.done .task-name { text-decoration: line-through; color: var(--muted); }
  .task.done::before { opacity: 0.3; }

  .checkbox {
    width: 20px; height: 20px;
    border: 2px solid var(--color, var(--accent1));
    border-radius: 4px;
    flex-shrink: 0; margin-top: 1px;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
  }
  .task.done .checkbox { background: var(--color, var(--accent1)); }
  .checkmark { display: none; color: #050810; font-size: 13px; font-weight: 700; line-height: 1; }
  .task.done .checkmark { display: block; }

  .task-info { flex: 1; min-width: 0; }
  .task-tag {
    font-family: 'Space Mono', monospace;
    font-size: 0.6rem; letter-spacing: 1.5px; text-transform: uppercase;
    color: var(--color, var(--accent1)); margin-bottom: 0.2rem; opacity: 0.8;
  }
  .task-name { font-size: 0.95rem; font-weight: 600; line-height: 1.4; transition: color 0.2s; }
  .task-desc { font-size: 0.78rem; color: var(--muted); margin-top: 0.2rem; line-height: 1.4; }

  .add-section { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 1.2rem; }
  .add-row { display: flex; gap: 0.6rem; margin-top: 0.8rem; }

  input[type="text"] {
    flex: 1; background: var(--bg); border: 1px solid var(--border); border-radius: 6px;
    padding: 0.6rem 0.9rem; color: var(--text); font-family: 'Syne', sans-serif;
    font-size: 0.88rem; outline: none; transition: border-color 0.2s;
  }
  input[type="text"]:focus { border-color: var(--accent1); }
  input::placeholder { color: var(--muted); }
  .tag-input { width: 130px !important; flex: none !important; }

  button {
    background: linear-gradient(135deg, var(--accent1), var(--accent2));
    color: #050810; border: none; border-radius: 6px; padding: 0.6rem 1.1rem;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.85rem;
    cursor: pointer; transition: opacity 0.2s, transform 0.1s; white-space: nowrap;
  }
  button:hover { opacity: 0.85; transform: translateY(-1px); }
  button:active { transform: translateY(0); }

  .progress-bar { height: 3px; background: var(--border); border-radius: 99px; margin-bottom: 2rem; overflow: hidden; }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
    border-radius: 99px; transition: width 0.5s ease;
  }

  .stats { font-family: 'Space Mono', monospace; font-size: 0.7rem; color: var(--muted); margin-bottom: 0.5rem; text-align: right; }

  .delete-btn {
    background: none; border: none; color: var(--muted); font-size: 1rem;
    cursor: pointer; padding: 0 0 0 0.5rem; opacity: 0;
    transition: opacity 0.2s, color 0.2s; line-height: 1; min-width: auto;
  }
  .task:hover .delete-btn { opacity: 1; }
  .delete-btn:hover { color: #f87171; background: none; transform: none; }

  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-10px); }
    to { opacity: 1; transform: translateX(0); }
  }

  .empty-state { text-align: center; padding: 2rem; color: var(--muted); font-size: 0.85rem; font-family: 'Space Mono', monospace; }

  /* ‚îÄ‚îÄ Modal ‚îÄ‚îÄ */
  .modal-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(5, 8, 16, 0.88);
    backdrop-filter: blur(5px);
    z-index: 100;
    align-items: center; justify-content: center;
  }
  .modal-overlay.active { display: flex; }

  .modal {
    background: var(--surface);
    border: 1px solid #3d1515;
    border-radius: 14px;
    padding: 2.2rem 2rem;
    max-width: 360px; width: 90%;
    text-align: center;
    animation: popIn 0.2s ease;
  }

  @keyframes popIn {
    from { opacity: 0; transform: scale(0.92); }
    to { opacity: 1; transform: scale(1); }
  }

  .modal-icon { font-size: 2.4rem; margin-bottom: 0.8rem; }
  .modal h2 { font-size: 1.2rem; font-weight: 800; color: #f87171; margin-bottom: 0.5rem; }
  .modal p { font-size: 0.78rem; color: var(--muted); line-height: 1.6; margin-bottom: 1.6rem; font-family: 'Space Mono', monospace; }
  .modal-actions { display: flex; gap: 0.7rem; justify-content: center; }

  .btn-cancel {
    background: var(--surface2); color: var(--text);
    border: 1px solid var(--border); border-radius: 6px;
    padding: 0.6rem 1.3rem; font-family: 'Syne', sans-serif;
    font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: background 0.2s;
  }
  .btn-cancel:hover { background: var(--border); transform: none; opacity: 1; }

  .btn-confirm {
    background: linear-gradient(135deg, #ef4444, #b91c1c);
    color: #fff; border: none; border-radius: 6px;
    padding: 0.6rem 1.3rem; font-family: 'Syne', sans-serif;
    font-weight: 700; font-size: 0.85rem; cursor: pointer;
  }
  .btn-confirm:hover { opacity: 0.85; transform: none; }
</style>
</head>
<body>

<!-- Modal de confirmaci√≥n -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-icon">üóëÔ∏è</div>
    <h2>¬øBorrar todo?</h2>
    <p>Se eliminar√°n todas las tareas guardadas.<br>Esta acci√≥n no se puede deshacer.</p>
    <div class="modal-actions">
      <button class="btn-cancel" onclick="closeModal()">Cancelar</button>
      <button class="btn-confirm" onclick="confirmClear()">S√≠, borrar todo</button>
    </div>
  </div>
</div>

<div class="container">
  <header>
    <div class="header-left">
      <h1>Cosas Pendientes</h1>
      <p class="subtitle">‚Äî tracker de cosas pendientes</p>
    </div>
    <button class="clear-btn" onclick="openModal()">‚ö† Borrar todo</button>
  </header>

  <div class="stats" id="stats"></div>
  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>

  <div class="section-label">Tareas</div>
  <div class="tasks" id="taskList"></div>

  <div class="section-label">Agregar nuevo pendiente</div>
  <div class="add-section">
    <div class="add-row">
      <input type="text" id="newTask" placeholder="Nombre de la tarea..." />
      <input type="text" id="newTag" class="tag-input" placeholder="Materia" />
    </div>
    <div class="add-row" style="margin-top:0.5rem">
      <input type="text" id="newDesc" placeholder="Descripci√≥n (opcional)..." />
      <button onclick="addTask()">+ Agregar</button>
    </div>
  </div>
</div>

<script>
const COLORS = ['#38bdf8','#818cf8','#34d399','#fb923c','#f472b6','#a78bfa','#2dd4bf','#facc15'];
let colorIndex = 0;

let tasks = JSON.parse(localStorage.getItem('pendientes') || '[]');
let nextId = Math.max(...tasks.map(t => t.id), 0) + 1;

function save() { localStorage.setItem('pendientes', JSON.stringify(tasks)); }

function render() {
  const list = document.getElementById('taskList');
  if (tasks.length === 0) {
    list.innerHTML = '<div class="empty-state">// sin pendientes üéâ</div>';
  } else {
    list.innerHTML = tasks.map((t, i) => `
      <div class="task ${t.done ? 'done' : ''}" style="--color: ${t.color}; animation-delay: ${i * 0.04}s" onclick="toggle(${t.id})">
        <div class="checkbox"><span class="checkmark">‚úì</span></div>
        <div class="task-info">
          <div class="task-tag">${t.tag}</div>
          <div class="task-name">${t.name}</div>
          ${t.desc ? `<div class="task-desc">${t.desc}</div>` : ''}
        </div>
        <button class="delete-btn" onclick="event.stopPropagation(); deleteTask(${t.id})">‚úï</button>
      </div>
    `).join('');
  }
  const done = tasks.filter(t => t.done).length;
  const total = tasks.length;
  const pct = total ? Math.round(done / total * 100) : 0;
  document.getElementById('stats').textContent = `${done} / ${total} completadas ‚Äî ${pct}%`;
  document.getElementById('progressFill').style.width = pct + '%';
}

function toggle(id) {
  tasks = tasks.map(t => t.id === id ? { ...t, done: !t.done } : t);
  save(); render();
}

function deleteTask(id) {
  tasks = tasks.filter(t => t.id !== id);
  save(); render();
}

function addTask() {
  const nameEl = document.getElementById('newTask');
  const tagEl  = document.getElementById('newTag');
  const descEl = document.getElementById('newDesc');
  const name = nameEl.value.trim();
  const tag  = tagEl.value.trim() || 'Otro';
  const desc = descEl.value.trim();
  if (!name) return;
  const color = COLORS[colorIndex % COLORS.length];
  colorIndex++;
  tasks.push({ id: nextId++, tag, name, desc, done: false, color });
  nameEl.value = ''; tagEl.value = ''; descEl.value = '';
  save(); render();
}

function openModal()  { document.getElementById('modalOverlay').classList.add('active'); }
function closeModal() { document.getElementById('modalOverlay').classList.remove('active'); }

function confirmClear() {
  localStorage.removeItem('pendientes');
  tasks = []; nextId = 1; colorIndex = 0;
  closeModal(); render();
}

// Cerrar al clickear fuera del modal
document.getElementById('modalOverlay').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});

document.getElementById('newTask').addEventListener('keydown', e => { if (e.key === 'Enter') addTask(); });
document.getElementById('newDesc').addEventListener('keydown', e => { if (e.key === 'Enter') addTask(); });

render();
</script>
</body>
</html>